jobs:
  include:
    - stage: tests
      name: C Compiling
      language: C 
      install: 
        - make install_deps
      script:
        - make clean
        - make compile
    - stage: tests
      name: C unittest
      script:
         - make
         - cd bin
         - ./test
      
      after_success:
        - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
        - chmod +x send.sh
        - ./send.sh success $WEBHOOK_URL
      after_failure:
        - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
        - chmod +x send.sh
        - ./send.sh failure $WEBHOOK_URL
    